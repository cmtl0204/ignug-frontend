<div class="grid">
  <div class="col-12">
    @if (coreService.isLoading) {
      <app-skeleton [type]="SkeletonEnum.CARD"></app-skeleton>
    }

    @if (!coreService.isLoading) {
      <p-toolbar>
        <div class="p-toolbar-group-left">
          <app-header-form [id]="id"></app-header-form>
        </div>
        <div class="p-toolbar-group-right">
          <app-form-button-action (submit)="onSubmit()" (cancel)="redirectRegistration()"></app-form-button-action>
        </div>
      </p-toolbar>

      <p-panel>
        <form [formGroup]="form" class="p-fluid grid">
          <!-- Code -->
          <div class="field col-12 xl:col-6 lg:col-6 md:col-6 sm:col-12">
            <label appLabel for="code" [label]="QuestionFormEnum.code" [required]="codeField"></label>
            <input pInputText id="code" formControlName="code"/>
            <small appErrorMessage [errors]="codeField.errors" [touched]="codeField.touched" [dirty]="codeField.dirty"></small>
          </div>

          <!-- Name -->
          <div class="field col-12 xl:col-6 lg:col-6 md:col-6 sm:col-12">
            <label appLabel for="name" [label]="QuestionFormEnum.name" [required]="nameField"></label>
            <input pInputText id="name" formControlName="name"/>
            <small appErrorMessage [errors]="nameField.errors" [touched]="nameField.touched" [dirty]="nameField.dirty"></small>
          </div>

          <!-- Description -->
          <div class="field col-12 xl:col-6 lg:col-6 md:col-6 sm:col-12">
            <label appLabel for="description" [label]="QuestionFormEnum.description" [required]="descriptionField"></label>
            <input pInputText id="description" formControlName="description"/>
            <small appErrorMessage [errors]="descriptionField.errors" [touched]="descriptionField.touched" [dirty]="descriptionField.dirty"></small>
          </div>

          <!-- Type -->
          <div class="field col-12 xl:col-6 lg:col-6 md:col-6 sm:col-12">
            <label appLabel for="type" [label]="QuestionFormEnum.type" [required]="typeField"></label>
            <p-dropdown id="type" formControlName="type" [options]="types" placeholder="Seleccione">
              <ng-template pTemplate="selectedItem" let-selectedItem>
                <div class="flex align-items-center gap-2">
                  <div>{{ selectedItem.name }}</div>
                </div>
              </ng-template>
              <ng-template pTemplate="item" let-item>
                <div class="flex align-items-center gap-2">
                  <div>{{ item.name }}</div>
                </div>
              </ng-template>
            </p-dropdown>
            <small appErrorMessage [errors]="typeField.errors" [touched]="typeField.touched" [dirty]="typeField.dirty"></small>
          </div>

          <!-- Enabled Checkbox -->
          <div class="field col-12 xl:col-6 lg:col-6 md:col-6 sm:col-12">
            <label appLabel for="enabled" [label]="QuestionFormEnum.enabled" [required]="enabledField"></label>
            <p-checkbox binary="true" formControlName="enabled"></p-checkbox>
            <small appErrorMessage [errors]="enabledField.errors" [touched]="enabledField.touched" [dirty]="enabledField.dirty"></small>
          </div>

          <!-- Evaluation Type Dropdown -->
          <div class="field col-12 xl:col-6 lg:col-6 md:col-6 sm:col-12">
            <label appLabel for="evaluationType" [label]="QuestionFormEnum.evaluationType" [required]="evaluationTypeField"></label>
            <p-dropdown id="evaluationType" formControlName="evaluationType" [options]="evaluationTypes" placeholder="Seleccione">
              <ng-template pTemplate="selectedItem" let-selectedItem>
                <div>{{ selectedItem.name }}</div>
              </ng-template>
              <ng-template pTemplate="item" let-item>
                <div>{{ item.name }}</div>
              </ng-template>
            </p-dropdown>
            <small appErrorMessage [errors]="evaluationTypeField.errors" [touched]="evaluationTypeField.touched" [dirty]="evaluationTypeField.dirty"></small>
          </div>
        </form>
      </p-panel>
    }
  </div>
</div>
